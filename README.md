# GameStore \n\nPlataforma de e-commerce de jogos com backend em Node.js/Express + PostgreSQL, autentica√ß√£o JWT, checkout transacional e chatbot inteligente com intents. O projeto est√° organizado para facilitar expans√£o futura (testes E2E, CI/CD, BDD).\n\n## üöÄ Tecnologias e bibliotecas utilizadas\n- **Node.js / Express** ‚Äì API REST\n- **PostgreSQL (pg)** ‚Äì Banco relacional\n- **JWT / bcrypt** ‚Äì Autentica√ß√£o e hashing de senha\n- **dotenv / cors** ‚Äì Configura√ß√£o de ambiente e seguran√ßa b√°sica\n- **Vanilla JS (Frontend)** ‚Äì P√°ginas e l√≥gica do chatbot\n- **Intent Engine (custom)** ‚Äì Roteamento de mensagens do chatbot\n\n> Planejado para futura inclus√£o de Cypress + Allure para testes automatizados.\n\n## üìå Funcionalidades Principais ("Cen√°rios" Implementados)\n‚úîÔ∏è Registro e Login com JWT\n‚úîÔ∏è Verifica√ß√£o r√°pida de usu√°rio / sess√£o (`/api/user/me`)\n‚úîÔ∏è Recupera√ß√£o de senha via fluxo guiado do chatbot\n‚úîÔ∏è Listagem de jogos com pre√ßos, imagens e plataformas (`/api/jogos`)\n‚úîÔ∏è Recomenda√ß√£o aleat√≥ria de jogo (`/api/jogos/recomendado`)\n‚úîÔ∏è Checkout com cria√ß√£o de `orders` e `order_items` (transa√ß√£o)\n‚úîÔ∏è Hist√≥rico de compras unificado (legado `compras` ou novas tabelas) via `/api/compras/historico` e `/api/orders/user/:id`\n‚úîÔ∏è Seed de itens Game Pass (`npm run seed:gamepass`)\n‚úîÔ∏è Chatbot com intents: menu principal, hist√≥rico, ticket, recomenda√ß√£o, suporte humano simulado\n‚úîÔ∏è Scripts de verifica√ß√£o e inicializa√ß√£o de banco (init, verify, create tables)\n\n## üõ† Scripts √öteis (Backend)\nTodos localizados em `Backend/scripts/` e com wrappers de compatibilidade na raiz. Execute sempre dentro de `Backend/`.\n\n| A√ß√£o | Comando | Descri√ß√£o |\n|------|---------|-----------|\n| Iniciar servidor | `npm start` | Sobe API na porta configurada (default 3000) |\n| Seed Game Pass | `npm run seed:gamepass` | Insere itens de assinatura em `jogos` |\n| Criar tabelas de pedidos | `node scripts/create-orders-tables.js` | Cria `orders` e `order_items` |\n| Verificar tabelas de pedidos | `node scripts/verify-orders-tables.js` | Checa exist√™ncia e estrutura |\n| Inicializar tabela jogos | `node scripts/init-db.js` | Recria e popula `jogos` (destrutivo) |\n| Inicializar tabela usu√°rios | `node scripts/init-users-db.js` | Recria `usuarios` (destrutivo) |\n| Teste r√°pido API p√∫blica | `node scripts/test-api.js` | Smoke GETs b√°sicos |\n| Teste fluxo auth | `node scripts/test-auth.js` | Exercita login/registro/verifica√ß√£o |\n| Verificar conex√£o Postgres | `node scripts/verify-db.js` | Lista jogos e valida imagens/prices |\n\n## üîê Autentica√ß√£o\n- Registro: `POST /api/auth/register`\n- Login: `POST /api/auth/login` (retorna token + dados)\n- Sess√£o: `GET /api/user/me` (JWT)\n- Tokens armazenados no `sessionStorage` no frontend.\n\n## ü§ñ Chatbot (Intents)\nIntents definidas em `frontend/scripts/chatbotIntents.js` e orquestradas por `chatbotCore.js`. Principais:\n- Hist√≥rico de compras (normaliza legado e novo modelo)\n- Ticket fict√≠cio (entrada do n√∫mero e resposta simulada)\n- Recomenda√ß√µes (chama endpoint aleat√≥rio)\n- Recupera√ß√£o de senha (fluxo guiado)\n- Menu principal com op√ß√µes numeradas e fallback gen√©rico\n\n## üß™ Testes (Planejado)\nEstrutura preparada para futura inclus√£o de:\n- Cypress para E2E (login, cat√°logo, checkout, hist√≥rico, chatbot)\n- Allure Reports para visualiza√ß√£o de execu√ß√£o\n- GitHub Actions para CI/CD (gatilho em push / PR)\n\n## üìä Logs & Verifica√ß√£o\nScripts fornecem sa√≠da rica em console (Unicode) para facilitar diagn√≥stico r√°pido sem ferramentas externas.\n\n## ‚öôÔ∏è Integra√ß√£o Cont√≠nua (Planejada)\nSugest√£o de pipeline futuro (`.github/workflows/ci.yml`):\n1. Instalar depend√™ncias backend\n2. Subir servi√ßo Postgres (GitHub Actions service container)\n3. Rodar scripts de inicializa√ß√£o / migrations\n4. Executar testes automatizados (quando adicionados)\n5. Publicar relat√≥rios (Allure) como artefatos\n\n## üìù Cen√°rios BDD (Planejado)\nDiret√≥rio sugerido futuro: `/gherkin-scenarios/` com casos Given-When-Then para:\n- Checkout transacional\n- Recupera√ß√£o de senha chatbot\n- Recomenda√ß√£o de jogo\n- Hist√≥rico de compras consolidado\n\n## ‚ñ∂Ô∏è Como Executar Localmente\n1. Clone o reposit√≥rio:\n```bash\ngit clone https://github.com/JoaoPauloQA/ProjetoGameStore.git\ncd ProjetoGameStore/Backend\n```\n2. Crie arquivo `.env` a partir de `.env.example` com \n```env\nDATABASE_URL=postgres://usuario:senha@host:porta/db\nJWT_SECRET=uma_chave_segura\n```\n3. Instale depend√™ncias e inicie:\n```bash\nnpm install\nnpm start\n```\n4. (Opcional) Popule itens especiais:\n```bash\nnpm run seed:gamepass\n```\n5. Acesse o frontend abrindo `frontend/index.html` em um servidor est√°tico ou direto no navegador (tokens e l√≥gica funcionam local).\n\n## üìÅ Estrutura do Projeto (Simplificada)\n```\nBackend/\n  server.js\n  db.js\n  controllers/\n  routes/\n  middlewares/\n  scripts/               # Utilit√°rios e manuten√ß√£o (init, verify, seeds, testes)\n  setup-*.sql            # Scripts SQL (jogos, usuarios, pedidos, compras legacy)\nfrontend/\n  index.html, login.html, checkout.html, minha-conta.html\n  scripts/               # L√≥gica principal (chatbot, checkout, conta)\n  styles/                # CSS\ndatabase/\n  schema.sql, seed.sql   # Modelo consolidado (planejado)\noutros/\n  README.md              # Notas organizacionais\nREADME.md                # (Este arquivo) Vis√£o geral do projeto\n```\n\n## üîÑ Fluxo de Compras (Resumo T√©cnico)\n1. Usu√°rio adiciona jogos ao carrinho (frontend)\n2. Checkout chama `/api/checkout` (JWT obrigat√≥rio)\n3. Backend inicia transa√ß√£o: cria `orders` + `order_items`\n4. Total consolidado armazenado em `orders.total_price`\n5. Hist√≥rico vis√≠vel em Minha Conta e chatbot (fallback para legado)\n\n## üì¶ Modelo de Dados (Chaves Principais)\n- `usuarios (id, username, email, senha_hash, ...)`\n- `jogos (id, title, price, platforms[], image, plays)`\n- `orders (id, user_id, total_price, created_at)`\n- `order_items (id, order_id, game_id, quantity)`\n- (Legado) `compras` ainda suportado para hist√≥rico em transi√ß√£o\n\n## üõ°Ô∏è Seguran√ßa & Boas Pr√°ticas\n- JWT assinado com segredo definido em `.env`\n- Hash de senha com bcrypt (custo 10)\n- Checagens de integridade em pre√ßo e quantidade nos scripts SQL\n- Separa√ß√£o clara entre scripts utilit√°rios e runtime (`scripts/`)\n\n## üìå Pr√≥ximos Passos Sugeridos\n- Adicionar su√≠te Cypress (E2E) + Gherkin\n- Implementar testes de API com Jest / Supertest\n- Configurar GitHub Actions (lint, testes, build, Allure)\n- Adicionar valida√ß√£o de entrada (celebrate / Joi) nas rotas cr√≠ticas\n- Otimizar queries de hist√≥rico com agrega√ß√µes e pagina√ß√£o\n\n## üë®‚Äçüíª Autor\n**Jo√£o Paulo QA**  
QA Automation Engineer | Test Automation Enthusiast  
üîó LinkedIn  
üìß jopaulomartinsdacostaa@gmail.com\n\n---\n\n> D√∫vidas ou melhorias? Abra uma Issue ou envie sugest√µes.\n